---
layout: post
title: "题解：[SCOI2005] 互不侵犯"
subtitle: "洛谷P1896"
date: 2024-10-17
author: "TH911"
header-img: "img/2024/10/006.jpeg"
header-mask: 0.4
tags:
  - 题解
  - 洛谷
  - DP
  - 状压DP
---

> [洛谷同步链接](https://www.luogu.com.cn/article/7if7f3dx)
>
> [题目传送门](https://www.luogu.com.cn/problem/P1896)

## 什么是状压DP

> 状压 DP 是动态规划的一种，通过将状态压缩为整数来达到优化转移的目的。
>
> ——[OI Wiki](https://oi-wiki.org/dp/state/#%E5%AE%9A%E4%B9%89)

### 状态压缩

例如，给定一个 `bool` 数组 $c$，那么 $c_i$ 为 $0$ 或 $1$。

我们可以将其压缩为一个二进制整数 $(a)_2$，这样 `a&(1<<i)` 即 $c_i$。可以参照下表：

|      $i$       |  0   |  1   |  2   |  3   |  4   |  5   |  6   |  7   |
| :------------: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: |
|     $c_i$      | $0$  | $1$  | $0$  | $1$  | $1$  | $0$  | $0$  | $1$  |
| `(a)_2&(1<<i)` | $0$  | $1$  | $0$  | $1$  | $1$  | $0$  | $0$  | $1$  |

此时，$(a)_2=(10011010)_2,a=154$。

### 状压DP

在此基础上进行DP，状态的转移化为了整数，那么状态转移同样**得到了优化**。

## 设计状态压缩

首先，这是一个 $N\times N$ 的棋盘。

那么，我们考虑压缩一行为一个整数。（当然，压缩列同样可行，你只需要“将棋盘转 $90^\circ$”）

$0$ 表示并没有放置国王，$1$ 表示放置了国王。那么比如 $74=(01001010)_2$ 表示的便是这样的一行：

![国王](data:image/png;base64,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)